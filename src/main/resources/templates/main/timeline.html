<!DOCTYPE html>
<html lang="ko" 
    xmlns:th="http://www.thymeleaf.org" 
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
<link rel="stylesheet" href="/static/css/style.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<title>Totragram</title>
</head>
<body>
	<div id="wrap">
		<header class="d-flex justify-content-between">
			<div>
				<h1>Totragram</h1>
			</div>
			
			<div><span th:text="|${userNickname}님|">실험용님</span> <a href="/user/logout">로그아웃</a></div>
		</header>
		
		<section>
			<th:block th:if="result" th:each="resultList : ${resultList}">
				<div class="section-item box-center">
					<div class="d-flex p-3">
						<div class="user-box d-flex align-items-top">
							<i class="bi bi-person-circle"></i>
						</div>
						
						<div class="d-flex align-items-end" th:text="${resultList.user.nickname}"><h2>아이디</h2></div>
					</div>
					
					<div class="d-flex justify-content-center p-5">
						<div class="item">
							<img th:if="${resultList.post.imagePath}" class="img-box bg-primary" th:src="${resultList.post.imagePath}">
							
							<div class="mt-2" th:text="${resultList.post.contents}">
								내용입니다
							</div>
							
							<div class="instagram-icon pt-3">
								<span>
									<i th:if="${resultList.like}" class="bi bi-heart-fill instagram-icon heart" th:data-postId="${resultList.post.id}"></i>
									<i th:unless="${resultList.like}" class="bi bi-heart instagram-icon heart" th:data-postId="${resultList.post.id}"></i>
								
									<small class="ml-2" th:text="|좋아요 ${resultList.likeCount}개|">좋아요</small>
								</span>
							</div>
						</div>
					</div>
				</div>
			</th:block>
		</section>
	</div>
	
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
	
<script>
	$(document).ready(function(){
		$(".heart").on("click", function(){
			let postId = $(this).data("data-postId");
			alert("postId : " + postId);
			if($(this).hasClass("bi-heart")){
				
				$.ajax({
					type:"post"
					,url:""
					,data:{}
					,success(response){
						
					}
				});
				
				$(this).addClass("bi-heart-fill");
				$(this).removeClass("bi-heart");
			}else{
				
				$.ajax({
					type:"delete"
					,url:""
					,data:{}
					,success(response){
						
					}
				});
				
				$(this).addClass("bi-heart");
				$(this).removeClass("bi-heart-fill");
			}
		});
	});
</script>
</body>
</html>